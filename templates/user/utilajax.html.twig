{% for user in users %}
    <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.roles ? user.roles|json_encode : '' }}</td>
        <td>{{ user.password }}</td>
        <td>{{ user.nom }}</td>
        <td>{{ user.prenom }}</td>
        <td>{{ user.isconnected ? 'Yes' : 'No' }}</td>
        <td>{{ user.isbanned ? 'Yes' : 'No' }}</td>
        <td class="actions">
            <a href="{{ path('app_user_show', {'id': user.id}) }}" class="btn btn-info btn-sm">Show</a>
            <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-primary btn-sm">Edit</a>
            <form action="{{ path('app_user_ban', {'id': user.id}) }}" method="post" onsubmit="return confirm('Are you sure you want to {{ user.isbanned ? 'unban' : 'ban' }} this user?');">
                <input type="hidden" name="_token" value="{{ csrf_token('ban' ~ user.id) }}" />
                <button type="submit" class="btn btn-primary btn-sm">
                    {% if user.isbanned %}
                        Unban
                    {% else %}
                        Ban
                    {% endif %}
                </button>
            </form>
        </td>
    </tr>
{% else %}
    <tr>
        <td colspan="9" class="text-center">No records found</td>
    </tr>
{% endfor %}