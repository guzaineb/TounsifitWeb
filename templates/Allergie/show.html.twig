
{% extends 'back/base.html.twig' %}
   

{% block body %}
 {# Affichage du message de succès #}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}

	<div
		class="container-xxl position-relative bg-white d-flex p-0">
		<!-- Spinner Start -->
		<div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
			<div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
				<span class="sr-only">Loading...</span>
			</div>
		</div>
		<!-- Spinner End -->


		<!-- Sidebar Start -->
		<div class="sidebar pe-4 pb-3">
			<nav class="navbar bg-light navbar-light">
				<a href="index.html" class="navbar-brand mx-4 mb-3">
					<h3 class="text-primary"><img class="rounded-circle" src="/img/logo1.png" alt="" style="width: 40px; height: 40px;"></i>TounsiFit</h3>
			</a>
			<div class="d-flex align-items-center ms-4 mb-4">

				<div class="navbar-nav w-100">
					<a href="index.html" class="nav-item nav-link active">
						<i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>

					<a href="{{path('allergie_show')}}" class="nav-item nav-link"><img class="rounded-circle" src="/img/allergieIcone.png" alt="" style="width: 40px; height: 40px;"></i>Allergie</a>
				<a href="{{ path('information_show') }}" class="nav-item nav-link"><img class="rounded-circle" src="/img/information.png" alt="" style="width: 40px; height: 40px;">
					Information Éducatif</a>


				<a href="form.html" class="nav-item nav-link"><img class="rounded-circle" src="img/produit-bio.png" alt="" style="width: 40px; height: 40x;"></i>Produit</a>


		</div>
	</nav>
</div>


<!-- Content Start -->
<div
	class="content">
	<!-- Navbar Start -->
	<nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
		<a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
			<h2 class="text-primary mb-0">
				<i class="fa fa-hashtag"></i>
			</h2>
		</a>
		<a href="#" class="sidebar-toggler flex-shrink-0">
			<i class="fa fa-bars"></i>
		</a>
<form id="searchForm" class="d-none d-md-flex ms-4">
    <input id="searchInput" class="form-control border-0" type="search" placeholder="Search">
</form>


<script>
    $(document).ready(function() {
        $('#searchInput').on('input', function() {
            var query = $(this).val();
            $.ajax({
                url: '{{ path('search_allergies') }}',
                method: 'POST',
                data: { query: query },
                beforeSend: function() {
                    $('#spinner').addClass('show');
                },
                success: function(response) {
                    $('#spinner').removeClass('show');
                    $('.table tbody').empty(); // Clear existing rows
                    $('.table tbody').append(response); // Append new rows
                },
                error: function(xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>

		<div class="navbar-nav align-items-center ms-auto">
			<div class="nav-item dropdown">
				
				 <div class="nav-item dropdown">
                        <a href="#" class="nav-link ">
                            <img class="rounded-circle me-lg-2" src=" /img/téléchargement.jpg" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex">Guesmi Zaineb</span>
                        </a>


			</div>
		</nav>
		<!-- Navbar End -->



    <div class="container-xxl position-relative bg-white d-flex p-0">
    <!-- Votre contenu -->
</div>

<h1>Liste des Allergies</h1>

<div class="col-sm-12 col-xl-15">
    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Id</th>
                            <th scope="col">Nom</th>
                            <th scope="col">Description</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for allergie in allergies %}
                            <tr>
                                <td>{{ allergie.id }}</td>
                                <td>{{ allergie.nom }}</td>
                                <td>{{ allergie.description }}</td>
                                <td>
                                    <a href="{{ path('allergie_update', {'id': allergie.id}) }}" class="btn btn-warning m-2">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                    <a href="{{ path('Allergie_delete', {'id': allergie.id}) }}" class="btn btn-danger m-2">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                    <a href="{{ path('allergie_pdf', {'id': allergie.id}) }}" class="btn btn-dark ">
                                        <i class="bi bi-download"></i>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<a href="{{ path('Add_Allergie') }}" class="btn btn-primary mt-3">Add</a>


		<!-- Footer Start -->
		<div class="container-fluid pt-4 px-4">
			<div class="bg-light rounded-top p-4">
				<div class="row">
					<div class="col-12 col-sm-6 text-center text-sm-start">
						&copy;
						<a href="#">TounsiFit</a>, All Right Reserved.
					</div>
					<div
						class="col-12 col-sm-6 text-center text-sm-end">
						<!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
						Designed By
						<a href="https://htmlcodex.com">HTML Codex</a>
					</br>
					Distributed By
					<a class="border-bottom" href="https://themewagon.com" target="_blank">ThemeWagon</a>
				</div>
			</div>
		</div>
	</div>
	<!-- Footer End -->

{% endblock %}